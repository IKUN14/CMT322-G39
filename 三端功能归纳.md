# USM Dormitory Facilities Repair and Feedback System
## 三端功能归纳

---

## 📚 一、学生端 (Student) 功能

### 1.1 导航菜单
- 📊 Dashboard（仪表盘）
- 📋 My Repairs（我的报修）
- ➕ Quick Repair（快速报修）

### 1.2 Dashboard（仪表盘）
**功能：**
- 查看个人报修统计指标（KPI）
  - Total Repairs（总报修数）
  - Pending（待处理）
  - In Progress（进行中）
  - Resolved（已解决）
  - Avg Resolution Time（平均解决时间）
  - Urgent Repairs（紧急报修）

### 1.3 Quick Repair（创建报修单）
**功能：**
- ✅ 创建新的报修请求
- 填写报修信息：
  - Title（标题）- 必填
  - Description（描述）- 必填
  - Location（位置）- 必填
  - Urgency（紧急度）- 必填
    - Normal（普通）
    - Urgent（紧急）
    - Emergency（紧急）
  - Scheduled Time（预约时间）- 可选
  - Images（图片）- 可选，支持多图上传
- 提交报修单（状态：Draft → Submitted）

### 1.4 My Repairs（报修单列表）
**功能：**
- 📋 查看所有自己创建的报修单
- 🔍 按状态筛选：
  - All Status（全部状态）
  - Submitted（已提交）
  - Accepted（已受理）
  - Assigned（已指派）
  - In Progress（进行中）
  - Resolved（已解决）
  - Closed（已关闭）
- 🔄 刷新列表
- 📊 显示信息：
  - 报修单标题
  - 状态标签（带背景颜色）
  - 紧急度标签（带背景颜色）
  - 位置
  - 创建时间
- 点击卡片查看详情

### 1.5 报修单详情页
**功能：**
- 📄 查看报修单完整信息：
  - 标题和状态
  - 描述
  - 位置
  - 紧急度
  - 创建时间
  - 指派维修工（如有）
- 📈 查看状态时间线（Status Timeline）：
  - 显示所有状态变更历史
  - 显示操作人和时间
  - 显示变更原因
- 📝 查看维修报告（如果已完成）：
  - 报告内容
  - 完成时间
  - 维修工姓名
  - 维修图片（可点击放大查看）
- ✅ 验收功能（当状态为 Resolved 时）：
  - Approve（批准）- 状态变为 Closed
  - Reject（拒绝）- 状态变为 InProgress，需重新维修
  - 可输入拒绝原因
- 💬 反馈功能：
  - 查看已有反馈
  - 提交新反馈（当状态为 Closed 时）：
    - 星级评分（1-5星）
    - 反馈内容
    - 反馈图片（可选）
- 🖼️ 图片预览功能：
  - 点击图片可全屏查看
  - 支持多图切换浏览

### 1.6 权限范围
- ✅ 只能查看自己创建的报修单
- ✅ 可以取消报修单（状态为 Submitted 或 Accepted 时）
- ✅ 可以验收报修单（状态为 Resolved 时）
- ✅ 可以提交反馈（状态为 Closed 时）

---

## 🔧 二、管理员端 (Admin) 功能

### 2.1 导航菜单
- 📊 Dashboard（仪表盘）
- 🔧 Repair Management（报修管理）
- 👥 Maintenance Team（维修团队）

### 2.2 Dashboard（仪表盘）
**功能：**
- 查看系统整体统计指标（KPI）
  - Total Repairs（总报修数）
  - Pending（待处理）
  - In Progress（进行中）
  - Resolved（已解决）
  - Avg Resolution Time（平均解决时间）
  - Urgent Repairs（紧急报修）

### 2.3 Repair Management（报修管理）
**功能：**
- 📋 查看所有报修单（系统全部）
- 🔍 按状态筛选：
  - All Status（全部状态）
  - Submitted（已提交）
  - Accepted（已受理）
  - Assigned（已指派）
  - In Progress（进行中）
- 🔄 刷新列表
- 📥 导出 CSV（导出所有报修单数据）
- 📊 表格显示：
  - 复选框（支持批量选择）
  - 标题
  - 状态标签（带背景颜色）
  - 紧急度标签（带背景颜色）
  - 创建人
  - 指派维修工
  - 创建时间
  - 操作按钮（Details）
- ✅ 批量操作：
  - 批量选择报修单
  - 批量分配
  - 批量完成

### 2.4 报修单详情页
**功能：**
- 📄 查看报修单完整信息：
  - 标题
  - 状态（带背景颜色标签）
  - 描述
  - 位置
  - 紧急度
  - 当前指派维修工
- 📈 查看状态时间线（Status Timeline）
- 📝 查看维修报告（如果已完成）：
  - 报告内容
  - 完成时间
  - 维修工姓名
  - 维修图片（可点击放大查看）
- 💬 查看反馈：
  - 查看所有学生提交的反馈
  - 显示评分、内容、图片
- 🔧 管理操作：
  - **Accept（受理）**：
    - 当状态为 Submitted 时可用
    - 将状态从 Submitted 改为 Accepted
  - **Assign/Reassign（分配/改派）**：
    - 当状态为 Accepted、Assigned 或 Reassigned 时可用
    - 选择维修工进行分配
    - 可选择分配原因
    - 支持改派（重新分配给其他维修工）

### 2.5 Maintenance Team（维修团队管理）
**功能：**
- 📋 查看所有维修工列表
- 🔍 搜索维修工：
  - 按姓名搜索
  - 按部门搜索
- 🔄 刷新列表
- ➕ 添加维修工：
  - Name（姓名）- 必填
  - Username（用户名）- 必填
  - Email（邮箱）- 必填
  - Password（密码）- 必填
  - Phone（电话）- 可选
  - Department（部门）- 必填
  - Status（状态）- 必填
    - Available（可用）
    - Busy（忙碌）
    - Offline（离线）
- 📊 显示维修工信息：
  - 姓名
  - 部门
  - 状态（带标签显示）

### 2.6 权限范围
- ✅ 可以查看所有报修单
- ✅ 可以受理报修单（Submitted → Accepted）
- ✅ 可以分配报修单给维修工（Accepted → Assigned）
- ✅ 可以改派报修单（Assigned/InProgress → Reassigned）
- ✅ 可以批量分配报修单
- ✅ 可以导出数据为 CSV
- ✅ 可以管理维修团队（添加、查看维修工）
- ✅ 可以查看所有反馈

---

## 🔨 三、维修工端 (Worker) 功能

### 3.1 导航菜单
- 📊 Dashboard（仪表盘）
- 📋 My Repairs（我的报修）

### 3.2 Dashboard（仪表盘）
**功能：**
- 查看个人工作统计指标（KPI）
  - Total Repairs（总报修数）
  - Pending（待处理）
  - In Progress（进行中）
  - Resolved（已解决）
  - Avg Resolution Time（平均解决时间）
  - Urgent Repairs（紧急报修）

### 3.3 My Repairs（报修单列表）
**功能：**
- 📋 查看分配给自己的报修单
- 📑 标签页分类：
  - **Pending（待处理）**：状态为 Assigned 的报修单
  - **In Progress（进行中）**：状态为 InProgress 的报修单
- 📊 显示信息：
  - 报修单标题
  - 状态标签（带背景颜色）
  - 紧急度标签（带背景颜色）
  - 位置
- 点击卡片查看详情

### 3.4 报修单详情页
**功能：**
- 📄 查看报修单完整信息：
  - 标题
  - 状态（带背景颜色标签）
  - 描述
  - 位置
- 📈 查看状态时间线（Status Timeline）：
  - 显示所有状态变更历史
  - 显示操作人和时间
  - 显示变更原因
- 📝 查看已提交的维修报告：
  - 报告内容
  - 完成时间
  - 维修图片（可点击放大查看）
- 🔧 操作功能：
  - **Accept（接受）**：
    - 当状态为 Assigned 时可用
    - 将状态从 Assigned 改为 InProgress
  - **Submit Report（提交报告）**：
    - 当状态为 InProgress 时可用
    - 填写维修报告内容（必填）
    - 上传维修图片（可选，支持多图）
    - 提交后状态变为 Resolved
    - 记录完成时间

### 3.5 权限范围
- ✅ 只能查看分配给自己的报修单
- ✅ 可以接受报修单（Assigned → InProgress）
- ✅ 可以提交维修报告（InProgress → Resolved）
- ✅ 可以上传维修图片
- ✅ 可以查看自己的工作历史记录

---

## 📊 四、三端共同功能

### 4.1 认证功能（所有用户）
- 🔐 登录（Login）
- 📝 注册（Register）
- 🔑 忘记密码（Forgot Password）
- 🚪 登出（Logout）

### 4.2 通用功能
- 📊 Dashboard 查看统计信息
- 📈 状态时间线查看
- 🖼️ 图片预览（点击放大）
- 🎨 状态和紧急度标签（带背景颜色）
- 🔄 数据刷新
- 📱 响应式设计（适配不同屏幕）

---

## 🔄 五、状态流转功能

### 5.1 学生可执行的状态操作
- Draft → Submitted（创建并提交报修单）
- Submitted → Canceled（取消报修单）
- Accepted → Canceled（取消报修单）
- Resolved → Closed（批准验收）
- Resolved → InProgress（拒绝验收，需重新维修）

### 5.2 管理员可执行的状态操作
- Submitted → Accepted（受理报修单）
- Accepted → Assigned（分配报修单）
- Accepted → Canceled（取消报修单）
- Assigned → Reassigned（改派报修单）
- InProgress → Reassigned（改派报修单）

### 5.3 维修工可执行的状态操作
- Assigned → InProgress（接受报修单）
- InProgress → Resolved（提交维修报告）

---

## 📈 六、功能统计

### 6.1 学生端功能总数：**8 项主要功能**
1. Dashboard 查看统计
2. 创建报修单
3. 查看报修单列表
4. 查看报修单详情
5. 取消报修单
6. 验收报修单
7. 提交反馈
8. 查看维修报告

### 6.2 管理员端功能总数：**11 项主要功能**
1. Dashboard 查看统计
2. 查看所有报修单
3. 筛选报修单
4. 受理报修单
5. 分配报修单
6. 改派报修单
7. 批量操作
8. 导出 CSV
9. 管理维修团队
10. 添加维修工
11. 查看反馈

### 6.3 维修工端功能总数：**6 项主要功能**
1. Dashboard 查看统计
2. 查看分配的报修单
3. 接受报修单
4. 提交维修报告
5. 上传维修图片
6. 查看工作历史

---

## ✅ 七、功能完整性检查

### 7.1 核心业务流程
- ✅ 报修单创建流程
- ✅ 报修单分配流程
- ✅ 维修工作流程
- ✅ 验收流程
- ✅ 反馈流程

### 7.2 数据管理
- ✅ 报修单 CRUD
- ✅ 维修工管理
- ✅ 反馈管理
- ✅ 状态历史记录
- ✅ 数据导出

### 7.3 用户体验
- ✅ 直观的界面设计
- ✅ 清晰的状态指示
- ✅ 便捷的操作流程
- ✅ 实时数据更新
- ✅ 图片预览功能

---

**总结：** 系统三端功能完整，涵盖了报修管理的完整生命周期，从创建、分配到完成、验收、反馈的各个环节都有相应的功能支持。

